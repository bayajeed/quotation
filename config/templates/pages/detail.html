{% extends 'base.html' %}
{% block content %}
<h3>Quotation: {{ quotation.project_name }}</h3>
<p><strong>Client:</strong> {{ quotation.client_name }}</p>
<p><strong>Notes:</strong> {{ quotation.notes }}</p>

{% for p in quotation.parts.all %}
  <div class="card mb-3">
    <div class="card-header"><strong>{{ p.name }}</strong></div>
    <div class="card-body">
      <table class="table table-sm">
        <thead><tr><th>#</th><th>Description</th><th>Qty</th><th>Unit</th><th>Unit Price</th><th>Total</th></tr></thead>
        <tbody>
          {% for it in p.items.all %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ it.description }}</td>
              <td>{{ it.qty }}</td>
              <td>{{ it.unit }}</td>
              <td>{{ it.unit_price }}</td>
              <td>{{ it.total_price }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      <div class="text-end fw-bold">Part Subtotal: TK {{ p.sub_total }}</div>
    </div>
  </div>
{% endfor %}

<div class="text-end mt-3">
  <h4>Grand Total: TK {{ quotation.total_amount }}</h4>
</div>
{% endblock %}
